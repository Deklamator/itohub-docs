# Общее Описание Смарт-контракта

Смарт-контракт проекта ITOhub, написанный на языке FunC, является ядром механизма безопасных сделок на платформе.

### Ключевая роль — Централизованный Эскроу

Основная функция контракта — выступать в роли **централизованного эскроу-сервиса**. Это означает, что он временно хранит средства покупателя до тех пор, пока условия сделки не будут выполнены.

Важно понимать, что контракт не является полностью децентрализованным. Ключевые операции, такие как разрешение споров, возврат средств и вывод комиссии, могут быть выполнены только с кошелька **администратора (модератора)**. Это обеспечивает дополнительный уровень контроля и возможность вмешательства в спорных ситуациях.

### Основные операции (op_codes)

Контракт управляется с помощью отправки сообщений с определенными кодами операций:

* **`op_create_deal (1)`**: Инициирует сделку, записывая адреса продавца, покупателя и сумму.
* **`op_fund_deal (5)`**: Финансирование сделки. Покупатель отправляет средства на контракт.
* **`op_resolve_deal (2)`**: Разрешение спора. Вызывается только администратором. В зависимости от вердикта, средства отправляются продавцу (за вычетом комиссии) или возвращаются покупателю.
* **`op_refund_unknown (3)`**: Возврат средств, отправленных на контракт по ошибке. Вызывается только администратором.
* **`op_withdraw_commissions (4)`**: Вывод накопленной платформой комиссии. Вызывается только администратором.